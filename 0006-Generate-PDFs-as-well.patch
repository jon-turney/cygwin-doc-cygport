From d4ef507e5a5487c811c6543bf546bd85f1411962 Mon Sep 17 00:00:00 2001
From: Jon TURNEY <jon.turney@dronecode.org.uk>
Date: Thu, 9 Jul 2015 12:33:39 +0100
Subject: [PATCH 6/6] Generate PDFs as well

---
 newlib/libc/Makefile.am | 3 +++
 newlib/libc/Makefile.in | 3 +++
 newlib/libm/Makefile.am | 3 +++
 newlib/libm/Makefile.in | 3 +++
 4 files changed, 12 insertions(+)

diff --git a/newlib/libc/Makefile.am b/newlib/libc/Makefile.am
index b70c59e..f785974 100644
--- a/newlib/libc/Makefile.am
+++ b/newlib/libc/Makefile.am
@@ -227,6 +227,7 @@ docbook: $(SUBDEFS) libc.in.xml
 	xsltproc --xinclude --path ${builddir} --nonet ${srcdir}/../refcontainers.xslt ${srcdir}/libc.in.xml >libc.xml
 	-xmllint --xinclude --path ${builddir} --postvalid --noent --nonet --noout libc.xml
 	xmlto --skip-validation --searchpath ${builddir} html-nochunks --stringparam funcsynopsis.style=ansi libc.xml
+	xmlto --skip-validation --searchpath ${builddir} pdf --with-dblatex --stringparam funcsynopsis.style=ansi libc.xml
 	xmlto --skip-validation --searchpath ${builddir} man -m ${srcdir}/../man.xsl libc.xml
 
 doc: docbook
@@ -234,6 +235,8 @@ doc: docbook
 install-data-local:
 	mkdir -p $(DESTDIR)$(htmldir)
 	$(INSTALL_DATA) libc.html $(DESTDIR)$(htmldir)/
+	mkdir -p $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) libc.pdf $(DESTDIR)$(docdir)/
 	mkdir -p $(DESTDIR)$(mandir)/man3
 	$(INSTALL_DATA) *.3 $(DESTDIR)$(mandir)/man3
 
diff --git a/newlib/libc/Makefile.in b/newlib/libc/Makefile.in
index 4da4453..6e6b0ef 100644
--- a/newlib/libc/Makefile.in
+++ b/newlib/libc/Makefile.in
@@ -1122,6 +1122,7 @@ docbook: $(SUBDEFS) libc.in.xml
 	xsltproc --xinclude --path ${builddir} --nonet ${srcdir}/../refcontainers.xslt ${srcdir}/libc.in.xml >libc.xml
 	-xmllint --xinclude --path ${builddir} --postvalid --noent --nonet --noout libc.xml
 	xmlto --skip-validation --searchpath ${builddir} html-nochunks --stringparam funcsynopsis.style=ansi libc.xml
+	xmlto --skip-validation --searchpath ${builddir} pdf --with-dblatex --stringparam funcsynopsis.style=ansi libc.xml
 	xmlto --skip-validation --searchpath ${builddir} man -m ${srcdir}/../man.xsl libc.xml
 
 doc: docbook
@@ -1129,6 +1130,8 @@ doc: docbook
 install-data-local:
 	mkdir -p $(DESTDIR)$(htmldir)
 	$(INSTALL_DATA) libc.html $(DESTDIR)$(htmldir)/
+	mkdir -p $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) libc.pdf $(DESTDIR)$(docdir)/
 	mkdir -p $(DESTDIR)$(mandir)/man3
 	$(INSTALL_DATA) *.3 $(DESTDIR)$(mandir)/man3
 
diff --git a/newlib/libm/Makefile.am b/newlib/libm/Makefile.am
index 2a09a33..ed3fa29 100644
--- a/newlib/libm/Makefile.am
+++ b/newlib/libm/Makefile.am
@@ -62,6 +62,7 @@ docbook: math/stmp-def complex/stmp-def libm.in.xml
 	xsltproc --xinclude --path ${builddir} --nonet ${srcdir}/../refcontainers.xslt ${srcdir}/libm.in.xml >libm.xml
 	-xmllint --xinclude -path ${builddir} --postvalid --noent --nonet --noout libm.xml
 	xmlto --skip-validation --searchpath ${builddir} html-nochunks --stringparam funcsynopsis.style=ansi libm.xml
+	xmlto --skip-validation --searchpath ${builddir} pdf --with-dblatex --stringparam funcsynopsis.style=ansi libm.xml
 	xmlto --skip-validation --searchpath ${builddir} man -m ${srcdir}/../man.xsl libm.xml
 
 doc: docbook
@@ -69,6 +70,8 @@ doc: docbook
 install-data-local:
 	mkdir -p $(DESTDIR)$(htmldir)
 	$(INSTALL_DATA) libm.html $(DESTDIR)$(htmldir)/
+	mkdir -p $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) libm.pdf $(DESTDIR)$(docdir)/
 	mkdir -p $(DESTDIR)$(mandir)/man3
 	$(INSTALL_DATA) *.3 $(DESTDIR)$(mandir)/man3/
 
diff --git a/newlib/libm/Makefile.in b/newlib/libm/Makefile.in
index 10687d3..f003d31 100644
--- a/newlib/libm/Makefile.in
+++ b/newlib/libm/Makefile.in
@@ -931,6 +931,7 @@ docbook: math/stmp-def complex/stmp-def libm.in.xml
 	xsltproc --xinclude --path ${builddir} --nonet ${srcdir}/../refcontainers.xslt ${srcdir}/libm.in.xml >libm.xml
 	-xmllint --xinclude -path ${builddir} --postvalid --noent --nonet --noout libm.xml
 	xmlto --skip-validation --searchpath ${builddir} html-nochunks --stringparam funcsynopsis.style=ansi libm.xml
+	xmlto --skip-validation --searchpath ${builddir} pdf --with-dblatex --stringparam funcsynopsis.style=ansi libm.xml
 	xmlto --skip-validation --searchpath ${builddir} man -m ${srcdir}/../man.xsl libm.xml
 
 doc: docbook
@@ -938,6 +939,8 @@ doc: docbook
 install-data-local:
 	mkdir -p $(DESTDIR)$(htmldir)
 	$(INSTALL_DATA) libm.html $(DESTDIR)$(htmldir)/
+	mkdir -p $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) libm.pdf $(DESTDIR)$(docdir)/
 	mkdir -p $(DESTDIR)$(mandir)/man3
 	$(INSTALL_DATA) *.3 $(DESTDIR)$(mandir)/man3/
 
-- 
2.4.5

